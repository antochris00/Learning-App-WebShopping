<div style="position: relative;">
<section id="cart_items">
  <div class="container">
    <div *ngIf="cartPage" class="breadcrumbs">
      <ol class="breadcrumb">
        <li><a href="#">Home</a></li>
        <li class="active">Shopping Cart</li>
      </ol>
    </div>
    <div class="table-responsive cart_info">
      <ngx-loading [show]="loading"></ngx-loading>
      <table class="table table-condensed">
        <thead>
          <tr class="cart_menu">
            <!-- <td class="image">Item</td> -->
            <td class="description">Item</td>
            <td class="price">MRP</td>
            <td class="price">Our Price</td>
            <td class="quantity">Quantity</td>
            <td class="total">Total</td>
            <td *ngIf="cartPage"></td>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of cartItems">
            <!-- <td class="cart_product">
              <a href=""><img src="images/cart/one.png" alt=""></a>
            </td> -->
            <td class="cart_description">
              <h4><a href="">{{item.product.productName}}</a></h4>
              <p>Web ID: {{item.product.productCode}}</p>
            </td>
            <td class="cart_price">
              <p>{{item.product.cost}}</p>
            </td>
            <td class="cart_total">
              <p class="cart_total_price" style="font-size: 20px;">{{item.product.sellingCost}}</p>
            </td>
            <td class="cart_quantity">
              <div class="cart_quantity_button">
                <a *ngIf="cartPage" class="cart_quantity_down" (click)="decrementItem(item)"> - </a>
                <input disabled class="cart_quantity_input" type="text" name="quantity" [(ngModel)]="item.quantity" autocomplete="off" size="2">
                <a *ngIf="cartPage" class="cart_quantity_up" (click)="incrementItem(item)"> + </a>
              </div>
            </td>
            <td class="cart_total">
              <p class="cart_total_price">₹ {{calculateTotal(item)}}</p>
            </td>
            <td class="cart_total" *ngIf="cartPage">
              <a class="cart_quantity_delete" style="cursor: pointer;" (click)="removeFromCart(item.product)"><i class="fa fa-times"></i></a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section> <!--/#cart_items-->

<section *ngIf="cartPage" id="do_action">
  <div class="container">
    <div class="heading">
      <h3>What would you like to do next?</h3>
      <p>Choose if you have a discount code or reward points you want to use or would like to estimate your delivery cost.
        <span *ngIf="this.pincodeDetails !== undefined && this.pincodeDetails !== null">Free delivery on minimum <strong>₹ {{this.pincodeDetails.minimumamtforfreedelivery}}</strong>.</span></p>
    </div>
    <div class="row">
      <ngx-loading [show]="couponLoading"></ngx-loading>
      <div class="col-sm-6">
        <div class="chose_area">
          <ul class="user_option">
            <li>
              <div *ngIf="!isMobileView()">
                <mat-form-field>
                  <mat-label>Delivery Pincode</mat-label>
                  <input type="number" matInput placeholder="pincode" [(ngModel)]="pincode">
                </mat-form-field>
                <a style="cursor: pointer;" class="btn btn-default update" (click)="checkDeliveryCode()">Check Delivery Charge</a>
              </div>
              <div *ngIf="isMobileView()">
                <mat-form-field class="matitem pull-left" *ngIf="isMobileView()" style="padding-left: 20px; width: 100%;">
                  <input type="text"
                        placeholder="Pincode"
                        matInput
                        [(ngModel)]="pincode">
                <button matSuffix type="button" class="btn btn-primary" (click)="checkDeliveryCode()"> Check Delivery Charge </button>
                </mat-form-field>
              </div>
            </li>
            <br/>
            <li>
              <div *ngIf="!isMobileView()">
                <mat-form-field>
                  <mat-label>Copupon Code</mat-label>
                  <input type="text" matInput placeholder="coupon code" [(ngModel)]="coupon">
                </mat-form-field>
                <a *ngIf="!isMobileView()" style="cursor: pointer;" class="btn btn-default update" (click)="applyCoupon()">Apply Coupon</a>
              </div>
              <div *ngIf="isMobileView()">
                <mat-form-field class="matitem pull-left" *ngIf="isMobileView()" style="padding-left: 20px; width: 100%;">
                  <input type="text"
                        placeholder="coupon code"
                        matInput
                        [(ngModel)]="coupon">
                <button matSuffix type="button" class="btn btn-primary" (click)="applyCoupon()"> Apply Coupon</button>
                </mat-form-field>
              </div>
            </li>
            <li *ngIf="this.couponDetails !== undefined && this.couponDetails !== null">
              <p>Maximum Discount Amount = {{this.couponDetails.maxDiscountLimit}} ₹</p>
            <li>
            <li>
              <small>T&C applied</small>
            </li>
          </ul>
          <!-- <a class="btn btn-default check_out" href="">Apply</a> -->
        </div>
      </div>
      <div class="col-sm-6">
        <div class="total_area">
          <ul>
            <li>Cart Sub Total <span><strong>₹ {{cartSubtotal()}}</strong></span></li>
            <li *ngIf="this.couponDetails !== undefined && this.couponDetails !== null">
              Coupon Applied - <strong>({{this.couponDetails.discount}}% Off)</strong> <span>₹ {{calculateCouponApplied()}}</span>
            </li>
            <li>Delivery Charge <span>{{getDeliveryCharge()}}</span></li>
            <li>Total <span><strong>₹ {{calculateTotalWithDeliveryCharge()}}</strong></span></li>
          </ul>
            <a class="btn btn-default update" (click)="gotoCheckout()">Proceed</a>
            <!-- <a class="btn btn-default check_out" href="">Check Out</a> -->
        </div>
      </div>
    </div>
  </div>
</section>
</div>
